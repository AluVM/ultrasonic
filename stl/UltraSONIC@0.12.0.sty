{-
  Id: stl:1n5aF5wL-MKjT6k~-AvXF4PT-gSCzsVq-TQkK582-gzTpTT4#agent-trick-guitar
  Name: UltraSONIC
  Version: 0.12.0
  Description: Transactional execution layer with capability-based memory access for zk-AluVM
  Author: Dr Maxim Orlovsky <orlovsky@ubideco.org>
  Copyright (C) 2024-2025 Laboratories for Ubiquitous Deterministic Computing (UBIDECO),
                          Institute for Distributed and Cognitive Systems (InDCS), Switzerland.
                          All rights reserved.
  License: Apache-2.0
-}

@context
typelib UltraSONIC

import FiniteField#report-canal-convert
  use Fe256#palace-mixer-visual

import Std#delete-roman-hair
  use AsciiPrintable#ultra-sunset-format
  use Bool#oxygen-complex-duet
  use AlphaNumLodash#percent-bingo-caesar
  use AlphaCapsLodash#duet-hammer-labor

import AluVM#reward-accent-swim
  use LibId#germany-culture-olivia
  use CoreConfig#ventura-ibiza-special
  use LibSite#polo-macro-elite

import CommitVerify#biology-news-adam
  use ReservedBytes14#prize-edison-classic
  use ReservedBytes1#origin-roger-relax
  use ReservedBytes2#florida-libra-circus

import StrictTypes#henry-heart-survive
  use TypeName#edgar-carol-mystery


@mnemonic(western-america-patrol)
data AuthToken         : FiniteField.Fe256

@mnemonic(tahiti-tobacco-grid)
data CellAddr          : opid Opid, pos U16

@mnemonic(nirvana-remote-danube)
data Codex             : version CommitVerify.ReservedBytes1
                       , name [Unicode ^ ..0xff]
                       , developer Identity
                       , timestamp I64
                       , fieldOrder U256
                       , inputConfig AluVM.CoreConfig
                       , verificationConfig AluVM.CoreConfig
                       , verifiers {U16 -> ^ ..0xff AluVM.LibSite}

@mnemonic(cargo-season-impact)
data CodexId           : [Byte ^ 32]

@mnemonic(nissan-congo-clark)
data Consensus         : none | bitcoin#16 | liquid | prime#32


@mnemonic(uniform-welcome-papa)
data ContractId        : [Byte ^ 32]

@mnemonic(aspirin-byte-elvis)
data ContractMeta      : testnet Std.Bool
                       , consensus Consensus
                       , reserved CommitVerify.ReservedBytes14
                       , timestamp I64
                       , name ContractName
                       , issuer Identity

@mnemonic(value-reform-lesson)
data ContractName      : unnamed ()
                       | named StrictTypes.TypeName

@mnemonic(email-alfred-chicago)
data Genesis           : codexId CodexId
                       , callId U16
                       , nonce FiniteField.Fe256
                       , blank1 CommitVerify.ReservedBytes2
                       , blank2 CommitVerify.ReservedBytes2
                       , destructibleOut [StateCell]
                       , immutableOut [StateData]

@mnemonic(smart-pioneer-nominal)
data Identity          : Std.AsciiPrintable, [Std.AsciiPrintable ^ ..0xfff]

@mnemonic(region-gilbert-drama)
data Input             : addr CellAddr, witness StateValue

@mnemonic(field-angel-escape)
data Issue             : version CommitVerify.ReservedBytes1
                       , meta ContractMeta
                       , codex Codex
                       , genesis Genesis

@mnemonic(carol-annual-polka)
data Operation         : contractId ContractId
                       , callId U16
                       , nonce FiniteField.Fe256
                       , destructibleIn [Input]
                       , immutableIn [CellAddr]
                       , destructibleOut [StateCell]
                       , immutableOut [StateData]

@mnemonic(storm-dragon-brain)
data Opid              : [Byte ^ 32]

@mnemonic(lima-anvil-karate)
data RawData           : [Byte]

@mnemonic(libra-grille-grace)
data StateCell         : data StateValue
                       , auth AuthToken
                       , lock AluVM.LibSite?

@mnemonic(siren-organic-double)
data StateData         : value StateValue, raw RawData?

@mnemonic(bamboo-morgan-edition)
data StateValue        : none ()
                       | single first FiniteField.Fe256
                       | double (first FiniteField.Fe256, second FiniteField.Fe256)
                       | triple (first FiniteField.Fe256
                       , second FiniteField.Fe256
                       , third FiniteField.Fe256)
                       | quadripple (first FiniteField.Fe256
                       , second FiniteField.Fe256
                       , third FiniteField.Fe256
                       , fourth FiniteField.Fe256)


